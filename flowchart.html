<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ëŒ ì¶”ì  ì‹œìŠ¤í…œ í”Œë¡œìš°ì°¨íŠ¸</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
            border-bottom: 4px solid #4CAF50;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h2 {
            color: #2c3e50;
            margin-top: 50px;
            border-left: 6px solid #4CAF50;
            padding-left: 20px;
            font-size: 24px;
        }
        .mermaid {
            background-color: white;
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 60px;
        }
        .description {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }
    </style>
</head>
<body>
    <h1>ğŸ¤– ì‚¬ëŒ ì¶”ì  ì‹œìŠ¤í…œ í”Œë¡œìš°ì°¨íŠ¸</h1>

    <!-- ============================================ -->
    <!-- ì„¹ì…˜ 1: ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡° ë° ì´ˆê¸°í™” -->
    <!-- ============================================ -->
    <div class="section">
        <h2>1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡° ë° ì´ˆê¸°í™”</h2>
        <div class="description">
            <strong>ì‹œìŠ¤í…œ ê°œìš”:</strong> CameraPublisherê°€ ì´ë¯¸ì§€ë¥¼ ë°›ì•„ TrackerManagerë¡œ ì¶”ì í•˜ê³ , ControllerManagerë¡œ ëª©/í—ˆë¦¬ë¥¼ ì œì–´í•˜ë©°, RoutineControllerë¡œ ë¡œë´‡ ë™ì‘ì„ ì œì–´í•©ë‹ˆë‹¤.
        </div>

        <div class="mermaid">
graph TB
    Start([ì‹œì‘]) --> Init[CameraPublisher ì´ˆê¸°í™”]
    Init --> Sub[ì´ë¯¸ì§€ í† í”½ êµ¬ë…<br/>/camera/color/image_raw/compressed]
    Sub --> TrackerInit[TrackerManager ì´ˆê¸°í™”]
    TrackerInit --> YOLOLoad[YOLO ëª¨ë¸ ë¡œë“œ<br/>+ Face ëª¨ë¸ ë¡œë“œ]
    YOLOLoad --> GPUCheck{GPU ì‚¬ìš© ê°€ëŠ¥?}
    GPUCheck -->|Yes| GPUWarm[GPU ì›Œë°ì—…]
    GPUCheck -->|No| CPUReady[CPU ì¤€ë¹„]
    GPUWarm --> ControllerInit[ControllerManager ì´ˆê¸°í™”<br/>ëª©/í—ˆë¦¬ Publisher ìƒì„±]
    CPUReady --> ControllerInit
    ControllerInit --> RoutineInit[RoutineController ì´ˆê¸°í™”<br/>HMI ëª…ë ¹ Publisher ìƒì„±<br/>hmi/robot_command]
    RoutineInit --> Ready[ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ]
    Ready --> Spin[ROS2 Spin ì‹œì‘]
    Spin --> Callback[ì´ë¯¸ì§€ ì½œë°± ëŒ€ê¸°]
    Callback --> End([ì¢…ë£Œ])
        </div>

        <div class="mermaid">
graph LR
    A[CameraPublisher] --> B[TrackerManager<br/>YOLO + Bot-SORT]
    A --> C[ControllerManager<br/>ëª©/í—ˆë¦¬ ì œì–´]
    A --> D[RoutineController<br/>ë¡œë´‡ ë™ì‘ ì œì–´]
    
    B --> E[ìƒíƒœ ë¨¸ì‹ <br/>TrackingState]
    C --> F[ëª©/í—ˆë¦¬ ê°ë„<br/>PID ì œì–´]
    D --> G[HMI ëª…ë ¹<br/>ROUTINE ì œì–´]
    
    style A fill:#4CAF50,color:#fff
    style B fill:#2196F3,color:#fff
    style C fill:#FF9800,color:#fff
    style D fill:#9C27B0,color:#fff
        </div>
    </div>

    <!-- ============================================ -->
    <!-- ì„¹ì…˜ 2: ìƒíƒœ ë¨¸ì‹  ë° ì¶”ì  ë¡œì§ -->
    <!-- ============================================ -->
    <div class="section">
        <h2>2. ìƒíƒœ ë¨¸ì‹  ë° ì¶”ì  ë¡œì§</h2>
        <div class="description">
            <strong>ìƒíƒœ ë¨¸ì‹ :</strong> IDLE â†’ TRACKING â†’ WAIST_FOLLOWER íë¦„ê³¼ LOST/SEARCHING ë³µêµ¬ ë¡œì§, HELLO/INTERACTION íŠ¹ìˆ˜ ìƒíƒœë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
        </div>

        <div class="mermaid">
stateDiagram-v2
    [*] --> IDLE: ì‹œìŠ¤í…œ ì‹œì‘
    
    IDLE --> TRACKING: ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ëŒ ì„ íƒ<br/>(2ì´ˆ ì´ìƒ ì§€ì†ëœ ê°ì²´)
    
    TRACKING --> LOST: ì¶”ì  ëŒ€ìƒ ì‚¬ë¼ì§
    TRACKING --> TRACKING: ì¶”ì  ëŒ€ìƒ ìœ ì§€
    TRACKING --> WAIST_FOLLOWER: ëª© ê°ë„ ì•ˆì • 5ì´ˆ<br/>+ ì–¼êµ´ ê²€ì¶œ ì„±ê³µ
    
    LOST --> TRACKING: ëŒ€ìƒ ì¬ë°œê²¬
    LOST --> SEARCHING: 45í”„ë ˆì„ ì´ìƒ ë†“ì¹¨
    
    SEARCHING --> TRACKING: ìƒˆ ëŒ€ìƒ ì„ íƒ
    SEARCHING --> SEARCHING: ì‚¬ëŒ ì—†ìŒ
    
    WAIST_FOLLOWER --> TRACKING: ControllerManager ìš”ì²­
    WAIST_FOLLOWER --> WAIST_FOLLOWER: í—ˆë¦¬ ì œì–´ ìœ ì§€<br/>ëª© 0ë„, í—ˆë¦¬ë¡œ ì´ë™
    
    IDLE --> HELLO: Manual ëª¨ë“œ ì„¤ì •
    TRACKING --> HELLO: Manual ëª¨ë“œ ì„¤ì •
    LOST --> HELLO: Manual ëª¨ë“œ ì„¤ì •
    SEARCHING --> HELLO: Manual ëª¨ë“œ ì„¤ì •
    WAIST_FOLLOWER --> HELLO: Manual ëª¨ë“œ ì„¤ì •
    HELLO --> IDLE: ì† í”ë“¤ê¸° ì™„ë£Œ
    HELLO --> TRACKING: ì† í”ë“¤ê¸° ì™„ë£Œ
    
    IDLE --> INTERACTION: Interaction Mode í™œì„±í™”
    TRACKING --> INTERACTION: Interaction Mode í™œì„±í™”
    INTERACTION --> IDLE: Interaction Mode ë¹„í™œì„±í™”
    
    note right of IDLE
        Routine: idle_breathing_rt
        ë¬´í•œ ë°˜ë³µ ìˆ¨ì‰¬ê¸° ëª¨ì…˜
    end note
    
    note right of TRACKING
        Routine: idle_breathing_rt
        ì¶”ì  ì¤‘ ë¬´í•œ ë°˜ë³µ
    end note
    
    note right of WAIST_FOLLOWER
        Routine: idle_breathing_rt
        í—ˆë¦¬ë¡œ ì´ë™, ëª© 0ë„
    end note
    
    note right of HELLO
        Routine: hand_wave_rt
        1íšŒ ì‹¤í–‰ í›„ ì¢…ë£Œ
    end note
    
    note right of INTERACTION
        Routine: ì—†ìŒ
        íƒ€ê²Ÿ ìë™ ì„ íƒ
        BB Box ì¶”ì 
    end note
        </div>

        <div class="mermaid">
graph TB
    Start([í”„ë ˆì„ ì…ë ¥]) --> YOLO[YOLO + Bot-SORT ì¶”ì ]
    YOLO --> CheckDetect{ê°ì§€ ê²°ê³¼ ìˆìŒ?}
    
    CheckDetect -->|ì—†ìŒ| NoDetect[ê°ì§€ ì—†ìŒ ì²˜ë¦¬]
    CheckDetect -->|ìˆìŒ| CreateObjects[ëª¨ë“  ì¶”ì  ê°ì²´ ìƒì„±]
    
    NoDetect --> StateCheck1{í˜„ì¬ ìƒíƒœ}
    StateCheck1 -->|TRACKING| ToLost[LOST ìƒíƒœë¡œ ì „ì´]
    StateCheck1 -->|LOST| IncLost[lost_frames ì¦ê°€]
    StateCheck1 -->|WAIST_FOLLOWER| KeepWaist[WAIST_FOLLOWER ìœ ì§€]
    StateCheck1 -->|INTERACTION| KeepInteraction[INTERACTION ìœ ì§€]
    IncLost --> CheckMax{45í”„ë ˆì„ ì´ìƒ?}
    CheckMax -->|Yes| ToSearch[SEARCHING ìƒíƒœë¡œ ì „ì´]
    CheckMax -->|No| KeepLost[LOST ìœ ì§€]
    
    CreateObjects --> StateCheck2{í˜„ì¬ ìƒíƒœ}
    
    StateCheck2 -->|IDLE| FindClosest[ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ëŒ ì°¾ê¸°<br/>2ì´ˆ ì´ìƒ ì§€ì†ëœ ê°ì²´ë§Œ]
    FindClosest --> CheckFound{ì°¾ìŒ?}
    CheckFound -->|Yes| SetTarget[target_track_id ì„¤ì •]
    SetTarget --> ToTracking[TRACKING ìƒíƒœë¡œ ì „ì´]
    CheckFound -->|No| StayIdle[IDLE ìœ ì§€]
    
    StateCheck2 -->|TRACKING| CheckTarget{ì¶”ì  ëŒ€ìƒ ì¡´ì¬?}
    CheckTarget -->|Yes| CheckNeckStable{ëª© ê°ë„ ì•ˆì •?<br/>3ë„ ì´ë‚´, 5ì´ˆ ì´ìƒ}
    CheckTarget -->|No| ToLost2[LOST ìƒíƒœë¡œ ì „ì´]
    CheckNeckStable -->|Yes| CheckFace{ì–¼êµ´ ê²€ì¶œ<br/>Face YOLO}
    CheckNeckStable -->|No| StayTracking[TRACKING ìœ ì§€]
    CheckFace -->|Yes| ToWaistFollower[WAIST_FOLLOWER ìƒíƒœë¡œ ì „ì´]
    CheckFace -->|No| ResetTimer[íƒ€ì´ë¨¸ ë¦¬ì…‹<br/>TRACKING ìœ ì§€]
    
    StateCheck2 -->|LOST| CheckTarget2{ì¶”ì  ëŒ€ìƒ ì¬ë°œê²¬?}
    CheckTarget2 -->|Yes| ToTracking2[TRACKING ìƒíƒœë¡œ ì „ì´]
    CheckTarget2 -->|No| IncLost2[lost_frames ì¦ê°€]
    
    StateCheck2 -->|SEARCHING| FindClosest2[ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ëŒ ì°¾ê¸°]
    FindClosest2 --> CheckFound2{ì°¾ìŒ?}
    CheckFound2 -->|Yes| SetTarget2[target_track_id ì„¤ì •]
    SetTarget2 --> ToTracking3[TRACKING ìƒíƒœë¡œ ì „ì´]
    
    StateCheck2 -->|WAIST_FOLLOWER| KeepWaist2[WAIST_FOLLOWER ìœ ì§€<br/>í—ˆë¦¬ ì œì–´ ê³„ì†]
    
    StateCheck2 -->|INTERACTION| CheckTarget3{íƒ€ê²Ÿ ì¡´ì¬?}
    CheckTarget3 -->|No| FindClosest3[ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ëŒ ìë™ ì„ íƒ]
    CheckTarget3 -->|Yes| KeepInteraction2[INTERACTION ìœ ì§€]
    
    StateCheck2 -->|HELLO| KeepHello[HELLO ìœ ì§€<br/>hand_wave_rt ì‹¤í–‰ ì¤‘]
    
    ToLost --> AssignState
    ToSearch --> AssignState
    ToTracking --> AssignState
    StayIdle --> AssignState
    StayTracking --> AssignState
    ToLost2 --> AssignState
    ToTracking2 --> AssignState
    KeepLost --> AssignState
    ToSearch --> AssignState
    ToTracking3 --> AssignState
    ToWaistFollower --> AssignState
    KeepWaist --> AssignState
    KeepWaist2 --> AssignState
    KeepInteraction --> AssignState
    KeepInteraction2 --> AssignState
    KeepHello --> AssignState
    
    AssignState[ìƒíƒœì— ë”°ë¼ ê°ì²´ ìƒíƒœ í• ë‹¹] --> CheckTarget4{ì¶”ì  ëŒ€ìƒ?}
    CheckTarget4 -->|Yes| SetTargetState[state = 'target'<br/>ë¶‰ì€ìƒ‰ í‘œì‹œ]
    CheckTarget4 -->|No| SetSystemState[state = ì‹œìŠ¤í…œ ìƒíƒœ]
    
    SetTargetState --> Return[ê²°ê³¼ ë°˜í™˜]
    SetSystemState --> Return
    Return --> End([ì™„ë£Œ])
        </div>

        <div class="mermaid">
graph TB
    Start([TRACKING ìƒíƒœ]) --> UpdateNeck[ControllerManager.update<br/>ëª© ê°ë„ ì—…ë°ì´íŠ¸]
    UpdateNeck --> CheckStable{ëª© ê°ë„ ì•ˆì •?<br/>ê¸°ì¤€ ê°ë„ë¡œë¶€í„° 3ë„ ì´ë‚´<br/>ì´ì „ í”„ë ˆì„ê³¼ë„ 3ë„ ì´ë‚´<br/>5ì´ˆ ì´ìƒ ì§€ì†}
    CheckStable -->|No| ResetTimer[íƒ€ì´ë¨¸ ë¦¬ì…‹]
    ResetTimer --> StayTracking[TRACKING ìœ ì§€]
    CheckStable -->|Yes| SetFlag[pending_face_check = true]
    SetFlag --> ProcessFrame[ë‹¤ìŒ í”„ë ˆì„ ì²˜ë¦¬]
    ProcessFrame --> CheckFlag{pending_face_check?}
    CheckFlag -->|Yes| FaceDetect[ì–¼êµ´ ê²€ì¶œ<br/>Face YOLO ëª¨ë¸<br/>íƒ€ê²Ÿ bbox ì˜ì—­]
    CheckFlag -->|No| StayTracking
    FaceDetect --> CheckFace{ì–¼êµ´ ê²€ì¶œë¨?}
    CheckFace -->|Yes| ToWaistFollower[WAIST_FOLLOWER ìƒíƒœë¡œ ì „ì´<br/>íƒ€ì´ë¨¸ ë¦¬ì…‹]
    CheckFace -->|No| ResetTimer2[íƒ€ì´ë¨¸ ë¦¬ì…‹<br/>TRACKING ìœ ì§€]
    ResetTimer2 --> StayTracking
    ToWaistFollower --> WaistControl[í—ˆë¦¬ ì œì–´ ì‹œì‘<br/>ëª© 0ë„ë¡œ ì´ë™<br/>í—ˆë¦¬ë¡œ ê°ë„ ì´ë™]
    StayTracking --> End([ì™„ë£Œ])
    WaistControl --> End
        </div>
    </div>

    <!-- ============================================ -->
    <!-- ì„¹ì…˜ 3: Routine ì‹œìŠ¤í…œ í†µí•© -->
    <!-- ============================================ -->
    <div class="section">
        <h2>3. Routine ì‹œìŠ¤í…œ í†µí•©</h2>
        <div class="description">
            <strong>Routine ì‹œìŠ¤í…œ:</strong> ìƒíƒœ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì ì ˆí•œ Routineì„ ì‹œì‘í•©ë‹ˆë‹¤. ìƒˆ Routine START ëª…ë ¹ë§Œ ë³´ë‚´ë©´ ê¸°ì¡´ Routineì´ ìë™ìœ¼ë¡œ ì¤‘ë‹¨ë©ë‹ˆë‹¤.
        </div>

        <div class="mermaid">
graph TB
    Start([ì´ë¯¸ì§€ ì½œë°±]) --> Process[TrackerManager.process]
    Process --> GetState[í˜„ì¬ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°]
    GetState --> CheckChange{ìƒíƒœ ë³€ê²½?}
    CheckChange -->|No| ControllerUpdate[ControllerManager.update]
    CheckChange -->|Yes| HandleRoutine[ìƒíƒœë³„ Routine ì „í™˜ ì²˜ë¦¬]
    
    HandleRoutine --> CheckNewState{ìƒˆ ìƒíƒœ}
    
    CheckNewState -->|IDLE| StartIdle[idle_breathing_rt::START]
    CheckNewState -->|TRACKING| StartIdle
    CheckNewState -->|LOST| StartIdle
    CheckNewState -->|SEARCHING| StartIdle
    CheckNewState -->|WAIST_FOLLOWER| StartIdle
    
    CheckNewState -->|HELLO| StartHello[hand_wave_rt::START<br/>ê¸°ì¡´ ë£¨í‹´ ìë™ ì¤‘ë‹¨]
    
    CheckNewState -->|INTERACTION| StopRoutine[í˜„ì¬ ë£¨í‹´ RESET<br/>ë£¨í‹´ ì¤‘ë‹¨]
    
    StartIdle --> PublishCmd1[í† í”½ ë°œí–‰<br/>hmi/robot_command<br/>the_bodyOne::ROUTINE::idle_breathing_rt::START]
    StartHello --> PublishCmd2[í† í”½ ë°œí–‰<br/>hmi/robot_command<br/>the_bodyOne::ROUTINE::hand_wave_rt::START]
    StopRoutine --> PublishCmd3[í† í”½ ë°œí–‰<br/>hmi/robot_command<br/>the_bodyOne::ROUTINE::routine_name::RESET]
    
    PublishCmd1 --> RoutineMgr1[RoutineManager ìˆ˜ì‹ ]
    PublishCmd2 --> RoutineMgr2[RoutineManager ìˆ˜ì‹ ]
    PublishCmd3 --> RoutineMgr3[RoutineManager ìˆ˜ì‹ ]
    
    RoutineMgr1 --> AutoStop1[ê¸°ì¡´ ë£¨í‹´ ìë™ ì¤‘ë‹¨<br/>should_stop_flag = true ì„¤ì •]
    RoutineMgr2 --> AutoStop2[ê¸°ì¡´ ë£¨í‹´ ìë™ ì¤‘ë‹¨<br/>should_stop_flag = true ì„¤ì •]
    
    AutoStop1 --> StartNew1[ìƒˆ ë£¨í‹´ ì‹œì‘<br/>should_stop_flag = false ë¦¬ì…‹]
    AutoStop2 --> StartNew2[ìƒˆ ë£¨í‹´ ì‹œì‘<br/>should_stop_flag = false ë¦¬ì…‹]
    RoutineMgr3 --> End1([ì™„ë£Œ])
    
    StartNew1 --> End2([ì™„ë£Œ])
    StartNew2 --> End3([ì™„ë£Œ])
    
    ControllerUpdate --> End4([ì™„ë£Œ])
    
    note right of AutoStop1
        ìƒˆ ë£¨í‹´ START ëª…ë ¹ë§Œ ë³´ë‚´ë©´
        ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ê¸°ì¡´ ë£¨í‹´ì„
        ì¤‘ë‹¨í•˜ê³  ìƒˆ ë£¨í‹´ì„ ì‹œì‘í•¨
        ëª…ì‹œì  RESET ë¶ˆí•„ìš”!
    end note
    
    note right of StartHello
        hand_wave_rtëŠ” 1íšŒ ì‹¤í–‰ í›„
        ìë™ìœ¼ë¡œ ì¢…ë£Œë¨
    end note
    
    note right of StartIdle
        idle_breathing_rtëŠ” ë¬´í•œ ë°˜ë³µ
        LoopWhileNodeë¡œ êµ¬í˜„ë¨
    end note
        </div>

        <div class="mermaid">
sequenceDiagram
    participant CP as CameraPublisher
    participant RC as RoutineController
    participant HMI as hmi/robot_command
    participant RM as RoutineManager
    participant OR as ê¸°ì¡´ ë£¨í‹´<br/>idle_breathing_rt
    participant NR as ìƒˆ ë£¨í‹´<br/>hand_wave_rt
    
    CP->>CP: ìƒíƒœ ë³€ê²½ ê°ì§€<br/>IDLE â†’ HELLO
    CP->>RC: switch_routine("hand_wave_rt")
    RC->>HMI: ë°œí–‰: the_bodyOne::ROUTINE::hand_wave_rt::START
    HMI->>RM: ëª…ë ¹ ìˆ˜ì‹ 
    RM->>OR: should_stop_flag = true ì„¤ì •
    OR->>OR: LoopWhileNode ì¡°ê±´ í•¨ìˆ˜<br/>false ë°˜í™˜ (ë£¨í”„ ì¤‘ë‹¨)
    OR->>OR: reset() í˜¸ì¶œí•˜ì—¬ ì •ë¦¬
    RM->>RM: should_stop_flag = false ë¦¬ì…‹
    RM->>NR: ìƒˆ ë£¨í‹´ ì‹œì‘
    NR->>NR: hand_wave_rt ì‹¤í–‰ ì¤‘...
    NR->>NR: 1íšŒ ì‹¤í–‰ ì™„ë£Œ í›„ ì¢…ë£Œ
    
    Note over CP,NR: ìë™ ì „í™˜ ì™„ë£Œ<br/>ëª…ì‹œì  RESET ë¶ˆí•„ìš”
        </div>

        <div class="mermaid">
graph LR
    A[ìƒíƒœ] --> B[IDLE<br/>idle_breathing_rt<br/>ë¬´í•œ ë°˜ë³µ]
    A --> C[TRACKING<br/>idle_breathing_rt<br/>ë¬´í•œ ë°˜ë³µ]
    A --> D[LOST<br/>idle_breathing_rt<br/>ë¬´í•œ ë°˜ë³µ]
    A --> E[SEARCHING<br/>idle_breathing_rt<br/>ë¬´í•œ ë°˜ë³µ]
    A --> F[WAIST_FOLLOWER<br/>idle_breathing_rt<br/>ë¬´í•œ ë°˜ë³µ]
    A --> G[HELLO<br/>hand_wave_rt<br/>1íšŒ ì‹¤í–‰]
    A --> H[INTERACTION<br/>ë£¨í‹´ ì—†ìŒ<br/>ì¤‘ë‹¨]
    
    style B fill:#e8f5e9
    style C fill:#e8f5e9
    style D fill:#e8f5e9
    style E fill:#e8f5e9
    style F fill:#e8f5e9
    style G fill:#fff3e0
    style H fill:#ffebee
        </div>

        <div class="mermaid">
graph TB
    A[Routine ëª…ë ¹ í˜•ì‹] --> B[ROBOT_NAME::ROUTINE::routine_name::sub_mode]
    
    B --> C[ROBOT_NAME<br/>the_bodyOne]
    B --> D[ROUTINE<br/>ê³ ì •ê°’]
    B --> E[routine_name<br/>idle_breathing_rt<br/>hand_wave_rt]
    B --> F[sub_mode<br/>START<br/>PAUSE<br/>RESUME<br/>RESET]
    
    C --> G[ì˜ˆì‹œ]
    D --> G
    E --> G
    F --> G
    
    G --> H[the_bodyOne::ROUTINE::idle_breathing_rt::START]
    G --> I[the_bodyOne::ROUTINE::hand_wave_rt::START]
    G --> J[the_bodyOne::ROUTINE::idle_breathing_rt::RESET]
        </div>
    </div>

</body>
</html>
